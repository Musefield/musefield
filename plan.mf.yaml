version: 1
assume_role: AIB
prechecks:
  - auth.has(['repo:write','deploy:canary'])
  - cfs.coherence_index >= 0.7
steps:
  - name: write-tests
    run: echo 'write tests stub âœ…'
  - name: scaffold
    run: echo 'scaffold apps/web services/sun services/apex âœ…'
  - name: migrate
    run: echo 'apply migrations âœ…'
  - name: canary
    run: echo 'deploy canary 1% âœ…'
  - name: verify
    run: echo 'verify CFS>=0.7 âœ…'
  - name: docs
    run: echo 'docs updated âœ…'
on_fail:
  - when: verify
    run: echo 'rollback ðŸš’'
meta:
  objective: Boot AIBâ†’Sunâ†’Apex pipeline and web skeleton
  done_when:
    - web dev shows Home & Metrics
    - contracts compile and smoke tests pass
    - Ethical Ledger entry appended
  world_cfs:
    coherence_index: 0.75
    rhythm_variance: 0.14
  self_id: aib.builder.sun.apex
